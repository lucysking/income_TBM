"0","# Libraries"
"0","library(tidyverse)"
"0","library(viridis)"
"0","#==============================================================================="
"0","# Prepare subset of diamonds"
"0","df <- "
"0","  diamonds %>% "
"0","  # Remove diamonds with impossible values"
"0","  filter(x > 0, y > 0, z > 0) %>% "
"0","  # Remove outliers"
"0","  filter(y < 20, z < 10) %>% "
"0","  # Remove diamonds above 0.99 quantile for carat"
"0","  filter(carat <= quantile(.$carat, probs = 0.99)) %>% "
"0","  # Reorder levels of color to increase in quality"
"0","  mutate(color = fct_rev(color))"
